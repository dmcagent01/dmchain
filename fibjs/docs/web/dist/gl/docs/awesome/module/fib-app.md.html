<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../../imgs/icon.png"><title>fib-app - JavaScript en fibra</title><link href="../../../../css/common.css" rel="stylesheet"><link href="../../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternar navegación</font></font></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../../index.html"><img src="../../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../../index.html">HOME</a></li><li><a href="../../guide/readme.md.html">GUIDE</a></li><li><a href="../../manual/module/readme.md.html">MODULE</a></li><li><a href="../../manual/object/readme.md.html">OBJECT</a></li><li><a href="../readme.md.html">AWESOME</a></li><li><a href="../../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../../docs/awesome/module/fib-app.md.html">中文</a> <a href="../../../../ca/docs/awesome/module/fib-app.md.html">Catalan</a> <a href="../../../../de/docs/awesome/module/fib-app.md.html">Deutsch</a> <a href="../../../../en/docs/awesome/module/fib-app.md.html">English</a> <a href="../../../../es/docs/awesome/module/fib-app.md.html">Español</a> <a href="../../../../fr/docs/awesome/module/fib-app.md.html">Français</a> <a href="../../../../gl/docs/awesome/module/fib-app.md.html">Galego</a> <a href="../../../../it/docs/awesome/module/fib-app.md.html">Italiano</a> <a href="../../../../ru/docs/awesome/module/fib-app.md.html">Русский</a> <a href="../../../../ja/docs/awesome/module/fib-app.md.html">日本語</a> <a href="../../../../ko/docs/awesome/module/fib-app.md.html">한국어</a> <a href="../../../../zh-tw/docs/awesome/module/fib-app.md.html">繁體中文</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impresionante módulo comunitario</font></font></span><div class="search"><span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" class="searchbox ds-input" placeholder="Busca" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="entrada de busca" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Avenir, &quot;Segoe UI&quot;, Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paxina principal</font></font></a></li><li><a href="../readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">módulo comunitario</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicación fib</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guía de desenvolvemento</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../guide/about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que é fibjs?</font></font></a></li>
<li><a href="../../guide/install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala o ambiente de execución</font></font></a></li>
<li><a href="../../guide/hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="../../guide/test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unha boa vida comeza cunha proba</font></font></a></li>
<li><a href="../../guide/profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atopar o asasino do rendemento</font></font></a></li>
<li><a href="../../guide/server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualización en caliente do módulo do servidor</font></font></a></li>
<li><a href="../../guide/host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enrutamento de nomes de dominio</font></font></a></li>
<li><a href="../../guide/x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso de certificados X509 en fibjs</font></font></a></li>
<li><a href="../../guide/contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">engadir módulo nativo</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">módulo básico</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obxectos incorporados</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../../manual/object/ifs/mongocollection.md.html" class="notranslate">MongoCollection</a></li>
<li><a href="../../manual/object/ifs/mongocursor.md.html" class="notranslate">MongoCursor</a></li>
<li><a href="../../manual/object/ifs/mongodb.md.html" class="notranslate">MongoDB</a></li>
<li><a href="../../manual/object/ifs/mongoid.md.html" class="notranslate">MongoID</a></li>
<li><a href="../../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">módulo comunitario</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li class="active"><a href="fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="marked.md.html" class="notranslate">marked</a></li>
<li><a href="node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="debug.md.html" class="notranslate">debug</a></li>
<li><a href="benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="ci.md.html" class="notranslate">ci</a></li>
<li><a href="fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="分享"></div> <div name="fib-app" data-unique="fib-app"></div><h1 id="fib-app"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicación fib</font></font></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marco de api base da aplicación fibjs</font></font></p>
<div name="Install" data-unique="Install"></div><h2 id="Install"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar</font></font></h2>
<pre><code class="lang-sh"><div class="line-numbers">1</div>npm install fib-app [--save]
</code></pre>
<div name="Test" data-unique="Test"></div><h2 id="Test"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proba</font></font></h2>
<pre><code class="lang-sh"><div class="line-numbers">1</div>npm <span class="hljs-built_in">test</span>
</code></pre>
<div name="建立基础脚本" data-unique="建立基础脚本"></div><h2 id="建立基础脚本"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Construír o script base</font></font></h2>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>)
<span class="hljs-keyword">const</span> Session = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fib-session'</span>)
<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> App(<span class="hljs-string">'sqlite:test.db'</span>, {
  <span class="hljs-attr">uuid</span>: <span class="hljs-literal">true</span><font></font>
});<font></font>
app.db.use(<span class="hljs-built_in">require</span>(<span class="hljs-string">'./defs/person'</span>));<font></font>
<font></font>
<span class="hljs-keyword">var</span> session = <span class="hljs-keyword">new</span> Session(<span class="hljs-keyword">new</span> util.LruCache(<span class="hljs-number">20000</span>), {
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">60</span> * <span class="hljs-number">1000</span><font></font>
});<font></font>
<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, [<font></font>
  session.cookie_filter,<font></font>
  {<font></font>
    <span class="hljs-string">'/1.0'</span>: app<font></font>
  }<font></font>
]);<font></font>
svr.run();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entre eles </font></font><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">está o módulo de definición do modelo, o contido é o seguinte:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta é unha definición estándar de orm, e tamén se poden usar outras funcións de orm, como a comprobación de tipos, eventos, etc.</font></font></p>
<div name="API-数据格式" data-unique="API-数据格式"></div><h2 id="API-数据格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formato de datos API</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para as solicitudes POST e PUT, o corpo da solicitude debe estar en formato JSON e o tipo de contido da cabeceira HTTP debe configurarse en application/json.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "tom","sex":"male","age":23}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para todas as solicitudes, o formato de resposta é un obxecto JSON.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O éxito dunha solicitude indícase polo código de estado HTTP. </font><font style="vertical-align: inherit;">Un código de estado de 2XX indica éxito, mentres que un 4XX indica que a solicitude fallou. </font><font style="vertical-align: inherit;">Cando falla unha solicitude, o corpo da resposta segue sendo un obxecto JSON, pero sempre conterá campos de código e mensaxe que pode usar para depurar. </font><font style="vertical-align: inherit;">Por exemplo, se falla unha solicitude de autorización, devolverase a seguinte información:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"code"</span>: <span class="hljs-number">4030501</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"The operation isn’t allowed for clients due to class-level permissions."</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O código de código divídese en tres partes, as tres primeiras 403 representan o tipo de erro, 05 representa o número da folla de datos e 01 representa o código de erro detallado.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para unha solicitude GET, normalmente devólvense datos do obxecto. Dependendo do enderezo da solicitude GET, pode devolver un obxecto ou unha matriz. </font><font style="vertical-align: inherit;">por exemplo:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
  <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12</div>[<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"lily"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"female"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span><font></font>
  }<font></font>
]<font></font>
</code></pre>
<div name="特殊字段" data-unique="特殊字段"></div><h2 id="特殊字段"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">campos especiais</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos datos do obxecto, hai catro campos con significados especiais que non se poden cambiar a través da API. </font><font style="vertical-align: inherit;">son </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, , </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, respectivamente </font></font><code>createdBy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entre eles </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créase e modificase automaticamente un só campo. </font></font><code>createdBy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debe especificar o tipo vostede mesmo.</font></font></p>
<div name="基础对象访问-API" data-unique="基础对象访问-API"></div><h2 id="基础对象访问-API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base Object Access API</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despois de completar tal definición de datos, terá directamente un conxunto de chamadas de interface que se axustan á especificación da API REST:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">url</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acción</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POST</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear un novo obxecto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONSEGUIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler obxecto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POÑER</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modificar obxecto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ELIMINAR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar obxecto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONSEGUIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consultar a lista de obxectos</font></font></td>
</tr>
</tbody>
</table>
<div name="创建新对象" data-unique="创建新对象"></div><h3 id="创建新对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear un novo obxecto</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para crear un novo obxecto, debe enviarse unha solicitude POST ao URL da clase, que debe conter o propio obxecto. </font><font style="vertical-align: inherit;">Por exemplo, para crear o obxecto como se describe anteriormente:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X POST \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "tom","sex":"male","age":23}'</span> \<font></font>
  http://localhost/1.0/person<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cando a creación ten éxito, a resposta HTTP é 201 Created, e o corpo da resposta é un obxecto JSON que contén o objectId e createdAt timestamp do novo obxecto:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<div name="读取对象" data-unique="读取对象"></div><h3 id="读取对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler obxecto</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cando creas un obxecto, podes recuperar o seu contido enviando unha solicitude GET á cabeceira Localización devolta. </font><font style="vertical-align: inherit;">Por exemplo, para obter o obxecto que creamos anteriormente:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O corpo devolto é un obxecto JSON que contén todos os campos proporcionados polo usuario máis </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os campos :</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
  <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
  <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao configurar o campo de retorno </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pode personalizar o contido devolto, </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contido é unha cadea de nome de campo </font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separada por ,:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000?keys=name%2Csex
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volverá:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span><font></font>
}<font></font>
</code></pre>
<div name="修改对象" data-unique="修改对象"></div><h3 id="修改对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modificar obxecto</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cambiar os datos que xa ten un obxecto, podes enviar unha solicitude PUT ao URL correspondente do obxecto. As claves que non especifiques non cambiarán, polo que só podes actualizar un subconxunto dos datos do obxecto. </font><font style="vertical-align: inherit;">Por exemplo, imos cambiar un campo de idade do noso obxecto:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"age": 25}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O obxecto JSON devolto conterá </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">campos que indican cando se produciu a actualización:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<div name="删除对象" data-unique="删除对象"></div><h3 id="删除对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar obxecto</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para eliminar un obxecto, envíe unha solicitude DELETE ao URL do obxecto especificado, por exemplo:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X DELETE http://localhost/1.0/person/57fbbdb0a2400000
</code></pre>
<div name="查询对象列表" data-unique="查询对象列表"></div><h3 id="查询对象列表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consultar a lista de obxectos</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao enviar unha solicitude GET ao URL da clase, podes obter varios obxectos á vez sen ningún parámetro de URL. </font><font style="vertical-align: inherit;">Aquí tes un xeito sinxelo de conseguir todos os usuarios:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O valor devolto é un obxecto JSON que contén un campo de resultados cuxo valor é unha lista de obxectos:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</div>[<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
    <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"lily"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"female"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span>,
    <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400001"</span><font></font>
  }<font></font>
]<font></font>
</code></pre>
<h4 id="keys-字段定制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">personalización do campo de claves</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do mesmo xeito que a consulta de obxectos, ao consultar unha lista, </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode . </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O contido é unha cadea de nomes de campo </font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separados por , por exemplo:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?keys=name%2Cage
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especificará que </font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">só </font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se devolverán os campos e dous.</font></font></p>
<h4 id="where-过滤条件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde filtrar</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O obxecto de consulta pódese restrinxir en forma de </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parámetros .</font></font></p>
<p><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O valor do parámetro debe estar codificado en JSON. </font><font style="vertical-align: inherit;">É dicir, se observa a solicitude de URL real que se fai, primeiro debería codificarse en JSON e despois codificarse en URL. </font><font style="vertical-align: inherit;">A forma máis sinxela de usar un </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parámetro é incluír a clave e o valor adecuados. </font><font style="vertical-align: inherit;">Por exemplo, se queriamos buscar un usuario chamado tom, construíriamos a consulta así:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?<span class="hljs-built_in">where</span>=%7B%22name%22%3A%22tom%22%7D
</code></pre>
<p><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O valor de é unha cadea JSON codificada en url co seguinte contido:</font></font><code>{"name":"tom"}</code></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ademais de coincidir exactamente cun valor determinado, </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tamén se admiten comparacións como contén. </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O parámetro admite as seguintes opcións:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chave</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operación</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mostra</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eq</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iguais</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"eq":"tom"}} ou {"name":"tom"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non igual a</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"ne":"tom"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">máis que o</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"age":{"gt":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gte</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maior ou igual a</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"age":{"gte":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menos que</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"age":{"lt":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lte</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menor ou igual a</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"age":{"lte":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consulta difusa</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"gústame":"%m"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_gústame</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consulta difusa</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"not_like":"%m"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparación de intervalos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"idade":{"entre":[22,25]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_entre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparación de intervalos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"idade":{"non_entre":[22,25]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enumerar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"nome":{"en":["tom","lirio"]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_en</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enumerar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"not_in":["tom","lirio"]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OU operación</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"ou":[{"nome":"tom"},{"idade":24}]}</font></font></td>
</tr>
</tbody>
</table>
<h4 id="skip-跳过记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saltar rexistros</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coa </font></font><code>skip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opción , pode saltar o número especificado de rexistros para conseguir o efecto de pasar páxinas.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?skip=100
</code></pre>
<h4 id="limit-返回记录限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limit devolve o límite de rexistro</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coa </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opción , pode limitar o número de rexistros devoltos, </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o número válido é 1-1000, o predeterminado é 100.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?<span class="hljs-built_in">limit</span>=100
</code></pre>
<h4 id="order-指定排序方式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orde especifica o método de clasificación</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mediante a </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opción , establece o método de ordenación do conxunto de resultados devoltos. Se o nome do campo contén antes </font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, será en orde inversa.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?order=-id
</code></pre>
<h4 id="count-返回结果总数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">count devolve o número total de resultados</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incremento baixo solicitude O número total de conxuntos de resultados que </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se poden devolver xunto co contido especificado.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?count=1&amp;<span class="hljs-built_in">limit</span>=1
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste punto, o resultado devolto conterá </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>results</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dous campos, que conteñen o número total e o resultado respectivamente:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13</div>{
  <span class="hljs-string">"count"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"results"</span>: [<font></font>
    {<font></font>
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
      <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
      <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
      <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
      <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
      <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
    }<font></font>
  ]<font></font>
}<font></font>
</code></pre>
<div name="建立扩展对象" data-unique="建立扩展对象"></div><h2 id="建立扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear obxecto de extensión</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao definir hasOne e hasMany a través de orm, a asociación entre obxectos pódese definir e reflectir na API, por exemplo:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {
  <span class="hljs-keyword">var</span> Person = db.models.person;<font></font>
<font></font>
  <span class="hljs-keyword">var</span> Pet = db.define(<span class="hljs-string">'pet'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span><font></font>
  });<font></font>
<font></font>
  Person.hasMany(<span class="hljs-string">'pets'</span>, Pet);<font></font>
};<font></font>
</code></pre>
<div name="扩展对象访问-API" data-unique="扩展对象访问-API"></div><h2 id="扩展对象访问-API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de acceso a obxectos estendido</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A seguinte é a definición da API do obxecto de extensión:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">url</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acción</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POÑER</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definir obxecto de extensión</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POST</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear obxecto de extensión</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONSEGUIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler obxecto de extensión</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POÑER</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modificar o obxecto de extensión</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ELIMINAR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar o obxecto de extensión</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONSEGUIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consulta a lista de obxectos estendidos</font></font></td>
</tr>
</tbody>
</table>
<div name="设置扩展对象" data-unique="设置扩展对象"></div><h3 id="设置扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definir obxecto de extensión</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecer un obxecto de extensión é establecer unha relación entre dous obxectos independentes. </font><font style="vertical-align: inherit;">Por exemplo, Tom adopta unha mascota chamada gato, que se pode conseguir mediante as seguintes operacións:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"id": "57fbbdb0a2400007"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na chamada, o ID de gato debe especificarse no corpo.</font></font></p>
<div name="创建扩展对象" data-unique="创建扩展对象"></div><h3 id="创建扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear obxecto de extensión</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao crear directamente un obxecto de extensión, pode establecer a conexión entre obxectos mentres crea o obxecto. </font><font style="vertical-align: inherit;">por exemplo:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X POST \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "cat"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crearase unha mascota chamada gato e asociarase a Tom.</font></font></p>
<div name="读取扩展对象" data-unique="读取扩展对象"></div><h3 id="读取扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler obxecto de extensión</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A lectura dun obxecto de extensión é moi semellante á lectura dun obxecto base e tamén admite a opción de teclas:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<div name="修改扩展对象" data-unique="修改扩展对象"></div><h3 id="修改扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modificar o obxecto de extensión</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ler un obxecto de extensión é moi semellante a ler un obxecto base:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "cat 1"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007<font></font>
</code></pre>
<div name="删除扩展对象" data-unique="删除扩展对象"></div><h3 id="删除扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar o obxecto de extensión</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A eliminación dun obxecto de extensión non elimina o propio obxecto, só disolve a relación entre os obxectos:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X DETELE http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<div name="查询扩展对象列表" data-unique="查询扩展对象列表"></div><h3 id="查询扩展对象列表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consulta a lista de obxectos estendidos</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consultar a lista de obxectos estendida é moi semellante á consulta da lista de obxectos base e tamén admite opcións como claves e filtrado condicional:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets
</code></pre>
<div name="ACL" data-unique="ACL"></div><h2 id="ACL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACL</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os permisos de datos pódense controlar definindo a ACL do modelo. </font><font style="vertical-align: inherit;">por exemplo:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</div><span class="hljs-keyword">const</span> orm = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fib-orm'</span>);<font></font>
<font></font>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'blog'</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">detail</span>: <span class="hljs-built_in">String</span>，
    <span class="hljs-attr">note</span>: <span class="hljs-built_in">String</span><font></font>
  }, {<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span><font></font>
        },<font></font>
        <span class="hljs-string">"57fbbdb0a2400000"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
        },<font></font>
        <span class="hljs-string">"roles"</span>: {
          <span class="hljs-string">"user"</span>: {
            <span class="hljs-string">"read"</span>: <span class="hljs-literal">true</span><font></font>
          }<font></font>
        }<font></font>
      };<font></font>
    }<font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se define Modelo sen especificar ACL, equivale a establecer permisos predeterminados:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div>{
  <span class="hljs-string">"*"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
  }<font></font>
}<font></font>
</code></pre>
<div name="主体" data-unique="主体"></div><h3 id="主体"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corpo principal</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hai tres tipos de descricións de asuntos ACL: usuario </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, usuario </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representan un usuario específico, un usuario </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cunha función determinada e </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todos os usuarios:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corpo principal</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">describir</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prioridade</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID de usuario específico</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">papel</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do grupo de usuarios</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
</tr>
</tbody>
</table>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao comprobar os permisos, primeiro coincidirá cos permisos </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondentes . Se non se especifica, coincidirá </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cos permisos correspondentes ao usuario. Se aínda se especifica, comprobe se están especificados </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os permisos de. Se </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non se especifica, hai sen permiso.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por exemplo, a configuración de permisos anterior especifica que o grupo de </font></font><code>user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usuarios pode ler, o usuario </font></font><code>57fbbdb0a2400000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ten todos os permisos e outros usuarios non teñen ningún permiso.</font></font></p>
<div name="权限" data-unique="权限"></div><h3 id="权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permiso</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACL clasifica os permisos en cinco categorías en función do comportamento da API:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permiso</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">describir</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permitir o tipo</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear obxecto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso/matriz</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler obxecto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso/matriz</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escribir</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modificar obxecto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso/matriz</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar obxecto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atopar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consultar a lista de obxectos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coincida con todos os permisos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro/falso/matriz</font></font></td>
</tr>
</tbody>
</table>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os permisos están formulados </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para permitir o acceso, </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para prohibir o acceso, </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para permitir o acceso só a campos especificados. </font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>find</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non se aceptan </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trátanse </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se o permiso especificado non existe, coincidirá cos </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permisos . </font><font style="vertical-align: inherit;">Se non hai ningunha, consulta de novo o asunto da seguinte prioridade.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por exemplo, no exemplo anterior, se precisa configurar </font></font><code>user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">só permitir a lectura </font></font><code>title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>detail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, outros poden ler   </font></font><code>title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pode configuralo así:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14</div>{
  <span class="hljs-string">"*"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">"read"</span>: [<span class="hljs-string">'title'</span>]<font></font>
  },<font></font>
  <span class="hljs-string">"57fbbdb0a2400000"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
  },<font></font>
  <span class="hljs-string">"roles"</span>: {
    <span class="hljs-string">"user"</span>: {
      <span class="hljs-string">"read"</span>: [<span class="hljs-string">'title'</span>, <span class="hljs-string">'detail'</span>]<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre>
<div name="对象权限" data-unique="对象权限"></div><h3 id="对象权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permisos de obxectos</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os permisos de toda a clase están definidos no Modelo. Se precisas establecer permisos para obxectos específicos, podes configurar o OACL para conseguir:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  }, {<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span><font></font>
        }<font></font>
      }<font></font>
    },<font></font>
    <span class="hljs-attr">OACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">var</span> _acl = {};
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.id === session.id)<font></font>
        _acl[session.id] = {<font></font>
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
        };<font></font>
<font></font>
      <span class="hljs-keyword">return</span> _acl;<font></font>
    }<font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste exemplo, cando o visitante é o propio obxecto, todas as operacións están permitidas, se non, todo acceso está prohibido. </font><font style="vertical-align: inherit;">Os permisos compróbanse do seguinte xeito:</font></font></p>
<ul>
<li><code>person[57fbbdb0a2400000]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>OACL</code></li>
<li><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>ACL</code></li>
</ul>
<div name="扩展对象权限" data-unique="扩展对象权限"></div><h3 id="扩展对象权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permisos de obxectos estendidos</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O control de acceso do obxecto estendido é semellante ao do obxecto base, a única diferenza é que debe especificarse por separado na ACL:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {
  <span class="hljs-keyword">var</span> Person = db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  },{<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"read"</span>: [<span class="hljs-string">'name'</span>, <span class="hljs-string">'sex'</span>],
          <span class="hljs-string">"extends"</span>: {
            <span class="hljs-string">"pets"</span>: {
              <span class="hljs-string">"read"</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-string">"find"</span>: <span class="hljs-literal">true</span><font></font>
            }<font></font>
          }<font></font>
        }<font></font>
      }<font></font>
    },<font></font>
    <span class="hljs-attr">OACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">var</span> _acl = {};
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.id === session.id)<font></font>
        _acl[session.id] = {<font></font>
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-string">"extends"</span>: {
            <span class="hljs-string">"pets"</span>: {
              <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
            }<font></font>
          }<font></font>
        };<font></font>
<font></font>
      <span class="hljs-keyword">return</span> _acl;<font></font>
    }<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> Pet = db.define(<span class="hljs-string">'pet'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span><font></font>
  });<font></font>
<font></font>
  Person.hasMany(<span class="hljs-string">'pets'</span>, Pet);<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nesta definición, calquera pode comprobar a </font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suma </font></font><code>sex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e libremente comprobar e buscar a súa información persoal.O </font></font><code>pets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propio usuario pode operar todos os seus propios datos e ter todos os permisos da información da súa propia mascota.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao comprobar os dereitos de acceso para obxectos estendidos, compróbanse por separado os dereitos de obxecto e os dereitos de obxecto estendidos. </font><font style="vertical-align: inherit;">Por exemplo, a seguinte solicitude:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os permisos compróbanse do seguinte xeito:</font></font></p>
<ul>
<li><code>pets[57fbbdb0a2400007]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>OACL</code></li>
<li><code>person[57fbbdb0a2400000]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>OACL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>extends</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>pets</code></li>
<li><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>ACL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>extends</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>pets</code></li>
<li><code>pets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>ACL</code></li>
</ul>
<div name="Function" data-unique="Function"></div><h2 id="Function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Función</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As API pódense definir para os modelos e pódense realizar operacións complexas de datos personalizando as funcións.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A gran maioría dos permisos poden ser controlados por ACL, e os permisos baseados en obxectos non precisan ser feitos a través de Function. </font><font style="vertical-align: inherit;">A función pódese usar para completar permisos baseados en datos, como conceder permisos a diferentes grupos de usuarios en función do estado de aprobación. </font><font style="vertical-align: inherit;">E unha serie de modificacións, como a necesidade de modificar varios rexistros de bases de datos.</font></font></p>
<div name="绘制数据模型" data-unique="绘制数据模型"></div><h2 id="绘制数据模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trace o modelo de datos</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despois de completar a definición de datos, pode </font></font><code>app.diagram()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usar o </font></font><code>svg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diagrama de clases de formato para debuxar o modelo de datos e gardalo nun ficheiro para obter unha imaxe semellante á seguinte:
</font></font><img src="./demo/diagram.svg" alt="diagrama"></p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc" class="tocify"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© Copyright 2012-2021 fibjs.org | </font></font><a href="../../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apóyanos</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title="Click to return on the top page" aria-describedby="tooltip83809"><span class="glyphicon glyphicon-chevron-up"></span></a><div class="tooltip fade left in" role="tooltip" id="tooltip83809" style="top: 0px; left: -190px; display: block;"><div class="tooltip-arrow" style="top: 0%;"></div><div class="tooltip-inner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fai clic para volver á páxina superior</font></font></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript" src="../../../../js/common.js"></script><script type="text/javascript" src="../../../../js/docs.js"></script></body></html>